{% extends 'main/layout.html' %}
{% block title %}Регистрация{% endblock %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center align-items-center">
    <div class="col-md-6">
        <h2 class="text-center mb-4">Регистрация</h2>
        <form method="post" class="needs-validation" novalidate>
            {% csrf_token %}
            <div class="form-group mb-3">
                <input type="text" name="username" class="form-control form-control-lg" placeholder="Имя пользователя" required>
            </div>
            <div class="form-group mb-3">
                <input type="email" name="email" class="form-control form-control-lg" placeholder="Email" required>
            </div>
            <div class="form-group mb-3 position-relative">
                <input type="password" name="password1" class="form-control form-control-lg" placeholder="Пароль" id="password1" required>
                <span class="password-toggle" onclick="togglePassword('password1')">
                    <i class="far fa-eye"></i>
                </span>
            </div>
            <div class="form-group mb-3 position-relative">
                <input type="password" name="password2" class="form-control form-control-lg" placeholder="Подтверждение пароля" id="password2" required>
                <span class="password-toggle" onclick="togglePassword('password2')">
                    <i class="far fa-eye"></i>
                </span>
            </div>
            <div class="form-group form-check mb-3 d-flex align-items-center">
                <input type="checkbox" name="agreed_to_terms" class="form-check-input me-2" id="id_agreed_to_terms" required>
                <label class="form-check-label" for="id_agreed_to_terms">
                    Я согласен с <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">пользовательским соглашением</a>.
                </label>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary btn-block w-100">Зарегистрироваться</button>
            </div>
        </form>
        <p class="mt-3 text-center mb-0">
            <small>Если у вас уже есть аккаунт, <a href="{% url 'login' %}" class="text-decoration-none">войдите</a>.</small>
        </p>
    </div>
</div>

<!-- Модальное окно с пользовательским соглашением -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="termsModalLabel">Пользовательское соглашение</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
            </div>
            <div class="modal-body">
                <h4>Правила использования сайта</h4>
                <p>
                    Добро пожаловать на наш сайт! Здесь психологи публикуют статьи, а пользователи могут их читать.
                    Пожалуйста, ознакомьтесь с нашими правилами:
                </p>
                <ul>
                    <li>Вы можете свободно читать статьи, но не копировать их без разрешения автора.</li>
                    <li>Комментарии должны быть уважительными и конструктивными.</li>
                    <li>Сайт не предоставляет экстренную психологическую помощь. Если вы находитесь в критическом состоянии, обратитесь к специалисту или позвоните на горячую линию.</li>
                </ul>
                <h4>Ваши обязательства</h4>
                <p>
                    Регистрируясь на сайте, вы соглашаетесь с тем, что:
                </p>
                <ul>
                    <li>Вы предоставляете достоверную информацию при регистрации.</li>
                    <li>Не будете использовать сайт для распространения спама или вредоносного контента.</li>
                    <li>Будете соблюдать правила и уважать других пользователей.</li>
                </ul>
                <h4>Отказ от ответственности</h4>
                <p>
                    Мы не несем ответственности за действия пользователей. Все материалы предоставляются "как есть".
                    Если у вас есть вопросы или замечания, свяжитесь с нами через форму обратной связи.
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
                <button type="button" class="btn btn-primary" id="agreeButton">Согласиться</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}